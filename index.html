<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>App WWZ – Utility Hub</title>
    <link rel="icon" href="https://wangwenzhi.eu.org/images/favicon_io/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="https://wangwenzhi.eu.org/images/favicon_io/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://wangwenzhi.eu.org/images/favicon_io/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://wangwenzhi.eu.org/images/favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="https://wangwenzhi.eu.org/images/favicon_io/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="https://wangwenzhi.eu.org/images/favicon_io/android-chrome-512x512.png">
    <link rel="manifest" href="https://wangwenzhi.eu.org/images/favicon_io/site.webmanifest">
    
    <meta property="og:type" content="website" />
    <meta property="og:title" content="APP.WWZ.iM" />
    <meta property="og:description" content="All-in-One Utility Hub" />
    <meta property="og:site_name" content="app.wwz.im" />
    <meta property="og:image" content="https://wangwenzhi.eu.org/images/og-image.png" />
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
    :root {
        --bg-body: #ffffff;
        --card-bg: #ffffff;
        --text-main: #000000;
        --text-sub: #666666;
        --border-color: #f0f0f0;
        
        /* 阴影配置 */
        --shadow-sm: 0 4px 12px rgba(0,0,0,0.08); 
        --shadow-hover: 0 12px 32px rgba(0,0,0,0.18);
        
        --glass: rgba(255, 255, 255, 0.85); 
        --nav-height: 60px;
        --content-width: 1200px;
    }

    @media (prefers-color-scheme: dark) {
        :root {
            --bg-body: #000000;
            --card-bg: #111111;
            --text-main: #ffffff;
            --text-sub: #888888;
            --border-color: #222222;
            --shadow-sm: 0 4px 12px rgba(0,0,0,0.4);
            --glass: rgba(0, 0, 0, 0.85);
        }
    }

    * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
    
    body {
        font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, sans-serif;
        background: var(--bg-body);
        color: var(--text-main);
        min-height: 100vh;
        padding-top: var(--nav-height);
        position: relative;
    }

    /* === Background === */
    .banner-bg {
        position: absolute; top: 0; left: 0; width: 100%; height: 500px;
        z-index: -1; overflow: hidden; pointer-events: none;
        mask-image: linear-gradient(to bottom, black 20%, transparent 100%);
        -webkit-mask-image: linear-gradient(to bottom, black 20%, transparent 100%);
        opacity: 0.05;
    }
    .blob {
        position: absolute; border-radius: 50%; filter: blur(100px);
        background: var(--text-main);
        animation: float 10s infinite ease-in-out alternate;
    }
    .blob-1 { top: -100px; left: -10%; width: 50%; height: 400px; }
    .blob-2 { top: -50px; right: -10%; width: 60%; height: 450px; animation-delay: -5s; }
    @keyframes float { 0% { transform: translate(0, 0); } 100% { transform: translate(0, 20px); } }

    /* === Navbar === */
    .navbar {
        position: fixed; top: 0; left: 0; width: 100%; height: var(--nav-height);
        background: var(--glass);
        backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
        z-index: 1000;
        display: flex; justify-content: center;
    }

    .nav-inner-container {
        width: 100%; max-width: var(--content-width);
        padding: 0 20px;
        display: grid; grid-template-columns: auto 1fr auto;
        align-items: center; gap: 15px;
    }
    
    .nav-left { display: flex; align-items: center; gap: 10px; flex-shrink: 0; cursor: pointer; }
    .nav-logo { width: 32px; height: 32px; border-radius: 8px; filter: grayscale(100%); opacity: 0.9; transition: opacity 0.2s; }
    .nav-left:hover .nav-logo { opacity: 1; }
    
    .nav-center {
        display: flex; align-items: center; 
        justify-content: flex-start;
        overflow-x: auto; height: 100%;
        scrollbar-width: none; -ms-overflow-style: none; 
        padding-left: 5px; 
    }
    .nav-center::-webkit-scrollbar { display: none; }
    
    .nav-tabs { display: flex; gap: 8px; padding: 0 5px; margin: 0 auto; }

    .nav-tab-item {
        padding: 6px 16px; border-radius: 99px; 
        font-size: 13px; font-weight: 500; color: var(--text-sub);
        cursor: pointer; white-space: nowrap; transition: all 0.2s;
        background: transparent; border: none;
    }
    .nav-tab-item:hover { color: var(--text-main); background: rgba(128,128,128,0.05); }
    .nav-tab-item.active { 
        background: var(--text-main); color: var(--bg-body); font-weight: 600;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15); 
    }

    .nav-right { display: flex; align-items: center; gap: 12px; flex-shrink: 0; }
    .btn-icon {
        color: var(--text-main); font-size: 16px; text-decoration: none;
        width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;
        border-radius: 50%; transition: background 0.2s; opacity: 0.7;
    }
    .btn-icon:hover { opacity: 1; background: rgba(128,128,128,0.1); }

    /* === Hero Section === */
    .hero-section { padding: 40px 20px; text-align: center; position: relative; }
    .hero-clock { margin-bottom: 25px; }
    
    .hero-time { 
        font-size: 64px; font-weight: 700; letter-spacing: -3px; line-height: 1; 
        color: var(--text-main); display: inline-block;
    }
    .hero-meta {
        font-size: 14px; color: var(--text-sub); margin-top: 8px; font-weight: 500; letter-spacing: 0.5px;
        display: flex; justify-content: center; align-items: center;
    }

    /* === Search Bar === */
    .search-container { max-width: 600px; margin: 0 auto; position: relative; }
    
    .search-input {
        width: 100%; padding: 16px 20px 16px 50px; 
        border-radius: 99px; 
        border: 2px solid transparent; 
        background: rgba(0, 0, 0, 0.02); 
        color: var(--text-main); 
        font-size: 16px; font-weight: 500;
        transition: all 0.25s ease;
    }
    .search-input:hover { background: rgba(0, 0, 0, 0.05); }
    
    @media (prefers-color-scheme: dark) {
        .search-input { background: rgba(255, 255, 255, 0.05); }
        .search-input:hover { background: rgba(255, 255, 255, 0.1); }
    }

    .search-input:focus {
        background: var(--card-bg);
        border-color: var(--text-main); 
        box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        transform: scale(1.01);
    }
    
    .search-icon { 
        position: absolute; left: 20px; top: 50%; transform: translateY(-50%); 
        color: var(--text-main); opacity: 0.6; font-size: 16px; 
        pointer-events: none;
    }

    /* === Content Grid (Balanced Version) === */
    .container { max-width: var(--content-width); margin: 0 auto; padding: 20px; padding-bottom: 80px; }
    .category-section { margin-bottom: 40px; scroll-margin-top: 80px; }
    
    .cat-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px; padding: 0 5px; }
    
    .cat-title { 
        font-size: 18px; font-weight: 700; display: flex; align-items: center; gap: 10px; 
        color: var(--text-main); cursor: pointer; user-select: none; transition: opacity 0.2s;
    }
    .cat-title:hover { opacity: 0.7; }
    .cat-title::before { content: ''; display: block; width: 5px; height: 5px; background: var(--text-main); border-radius: 50%; }

    .btn-open-all {
        font-size: 12px; color: var(--text-sub); background: transparent;
        padding: 5px 10px; border: 1px solid var(--border-color); border-radius: 8px; 
        cursor: pointer; font-weight: 500; transition: all 0.2s; 
        display: flex; align-items: center; gap: 5px;
    }
    .btn-open-all:hover { border-color: var(--text-main); color: var(--text-main); background: rgba(128,128,128,0.05); }

    /* === 网格布局调整 (Balanced) === */
    .app-grid { 
        display: grid; 
        /* 基础宽度 160px，保证平板显示紧凑但舒适 */
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); 
        gap: 14px; 
    }

    /* === 卡片样式调整 === */
    .app-card {
        background: var(--card-bg); 
        border-radius: 14px;
        padding: 16px; /* 舒适的内边距 */
        
        display: flex; flex-direction: column; align-items: flex-start; text-align: left;
        text-decoration: none; color: var(--text-main);
        transition: transform 0.2s, box-shadow 0.2s;
        border: none; 
        box-shadow: var(--shadow-sm); 
        position: relative; overflow: hidden; height: 100%;
    }
    .app-card:hover { transform: translateY(-3px); box-shadow: var(--shadow-hover); }

    /* 图标：默认 42px (介于原版和超大版之间) */
    .icon-wrapper {
        width: 42px; height: 42px; 
        margin-bottom: 10px; 
        border-radius: 11px; 
        overflow: hidden; background: transparent; flex-shrink: 0;
    }
    .app-icon { width: 100%; height: 100%; object-fit: cover; border-radius: 11px; opacity: 0; transition: opacity 0.3s ease-in; }
    .app-icon.loaded { opacity: 1; }
    
    .app-name { 
        font-size: 15px; /* 字号适中 */
        font-weight: 700; margin-bottom: 4px; line-height: 1.3;
        color: var(--text-main); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 100%;
    }
    .app-desc { 
        font-size: 12px; color: var(--text-sub); line-height: 1.4; opacity: 0.9;
        display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
        overflow: hidden; text-overflow: ellipsis; 
        height: 35px; 
        margin-top: 0px;
    }

    /* === 电脑端专属 (PC Optimization) === */
    @media (min-width: 1024px) {
        .app-grid {
            /* 210px: 黄金尺寸，比原版大，但比上一版小 */
            grid-template-columns: repeat(auto-fill, minmax(210px, 1fr)); 
            gap: 20px; 
        }
        .app-card {
            padding: 20px; 
            border-radius: 18px; 
        }
        .icon-wrapper {
            width: 52px; height: 52px; /* 适度加大 */
            margin-bottom: 14px;
            border-radius: 14px;
        }
        .app-name { 
            font-size: 16px; 
            margin-bottom: 5px;
        }
        .app-desc {
            font-size: 13px; 
            height: 38px; 
        }
    }

    /* === Empty State === */
    .empty-state {
        text-align: center; padding: 60px 0; color: var(--text-sub);
        display: none;
    }
    .empty-state i { font-size: 40px; margin-bottom: 15px; opacity: 0.3; }
    .empty-state p { font-size: 14px; }

    /* Back To Top */
    .back-to-top {
        position: fixed; bottom: 30px; right: 30px;
        width: 40px; height: 40px; border-radius: 50%;
        background: var(--text-main); color: var(--bg-body);
        border: none; display: flex; align-items: center; justify-content: center;
        font-size: 14px; cursor: pointer;
        opacity: 0; visibility: hidden; transform: translateY(20px);
        transition: all 0.3s; z-index: 900;
        box-shadow: 0 4px 12px rgba(0,0,0,0.25);
    }
    .back-to-top.show { opacity: 1; visibility: visible; transform: translateY(0); }
    .back-to-top:hover { transform: translateY(-3px); }

    /* Mobile Only Adjustments */
    @media (max-width: 640px) {
        .nav-inner-container { padding: 0 15px; gap: 10px; }
        .nav-center { padding-right: 15px; }
        .container { padding: 20px 15px; }
        .hero-time { font-size: 48px; }
        
        .app-grid { 
            /* 强制双列 */
            grid-template-columns: repeat(2, 1fr); 
            gap: 12px; 
        }
        
        .app-card { 
            padding: 14px; 
            border-radius: 14px; 
        }
        .icon-wrapper { 
            width: 40px; height: 40px; /* 手机端适中大小 */
            margin-bottom: 8px; border-radius: 10px; 
        }
        .app-name { font-size: 14px; margin-bottom: 3px; }
        .app-desc { font-size: 11px; height: 32px; line-height: 1.35; }
        
        .btn-open-all span { display: none; }
        .back-to-top { bottom: 20px; right: 20px; width: 40px; height: 40px; }
    }
</style>
</head>
<body>

<div class="banner-bg">
    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>
</div>

<nav class="navbar">
    <div class="nav-inner-container">
        <div class="nav-left" onclick="scrollToTop()">
            <img src="https://wangwenzhi.eu.org/images/favicon_io/apple-touch-icon.png" class="nav-logo" alt="Logo">
        </div>
        
        <div class="nav-center">
            <div class="nav-tabs" id="navTabs"></div>
        </div>
        
        <div class="nav-right">
            <a href="admin.html" class="btn-icon" title="管理后台">
                <i class="fa-solid fa-gear"></i>
            </a>
        </div>
    </div>
</nav>

<section class="hero-section">
    <div class="hero-clock">
        <div class="hero-time" id="heroTime">00:00</div>
        <div class="hero-meta">
            <span id="heroDate">Loading...</span>
        </div>
    </div>
    <div class="search-container">
        <i class="fa-solid fa-search search-icon"></i>
        <input type="text" class="search-input" id="searchInput" placeholder="Search...">
    </div>
</section>

<div class="container" id="app-container"></div>

<div class="empty-state" id="emptyState">
    <i class="fa-solid fa-ghost"></i>
    <p>No results found</p>
</div>

<button id="backToTop" class="back-to-top" onclick="scrollToTop()">
    <i class="fa-solid fa-arrow-up"></i>
</button>

<script src="apps.js"></script>

<script>
// === 1. Time Update ===
function updateTime() {
    const now = new Date();
    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    document.getElementById('heroTime').textContent = `${hours}:${minutes}`;
    
    const options = { month: 'long', day: 'numeric', weekday: 'long' };
    document.getElementById('heroDate').textContent = now.toLocaleDateString('zh-CN', options);
}
setInterval(updateTime, 1000);
updateTime();

// === 2. Render Logic ===
function renderCategoriesCustom() {
    const container = document.getElementById('app-container');
    const navTabs = document.getElementById('navTabs');
    if (!container || !appData) return;
    
    container.innerHTML = '';
    navTabs.innerHTML = '';
    
    appData.forEach((cat, ci) => {
        const tabBtn = document.createElement('button');
        tabBtn.className = 'nav-tab-item';
        tabBtn.textContent = cat.title;
        tabBtn.dataset.target = `cat-${ci}`;
        tabBtn.title = "双击打开全部分类链接";
        tabBtn.onclick = () => {
            const section = document.getElementById(`cat-${ci}`);
            if(section) section.scrollIntoView({ behavior: 'smooth', block: 'start' });
        };
        tabBtn.ondblclick = () => openAllApps(ci);
        navTabs.appendChild(tabBtn);

        const cardsHTML = cat.apps.map(app => `
            <a href="${app.link}" target="_blank" class="app-card" 
               data-name="${app.name.toLowerCase()}" 
               data-desc="${app.description.toLowerCase()}">
                <div class="icon-wrapper">
                    <img class="app-icon" src="${app.icon}" loading="lazy" 
                         onload="this.classList.add('loaded')" 
                         onerror="this.src='https://ui-avatars.com/api/?name=${app.name}&background=random&color=000&size=128'; this.classList.add('loaded');">
                </div>
                <div class="app-name">${app.name}</div>
                <div class="app-desc">${app.description}</div>
            </a>
        `).join('');

        const section = document.createElement('div');
        section.className = 'category-section';
        section.id = `cat-${ci}`;
        section.innerHTML = `
            <div class="cat-header">
                <div class="cat-title" title="双击打开本组所有网页" ondblclick="openAllApps(${ci})">
                    ${cat.title}
                </div>
                <button class="btn-open-all" onclick="openAllApps(${ci})">
                    <i class="fa-solid fa-rocket"></i> <span>打开全部</span>
                </button>
            </div>
            <div class="app-grid">${cardsHTML}</div>
        `;
        container.appendChild(section);
    });
    setupScrollSpy();
}

function setupScrollSpy() {
    const sections = document.querySelectorAll('.category-section');
    const navItems = document.querySelectorAll('.nav-tab-item');
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                navItems.forEach(item => item.classList.remove('active'));
                const activeTab = document.querySelector(`.nav-tab-item[data-target="${entry.target.id}"]`);
                if (activeTab) {
                    activeTab.classList.add('active');
                    activeTab.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
                }
            }
        });
    }, { rootMargin: '-20% 0px -60% 0px' });
    sections.forEach(section => observer.observe(section));
}

function scrollToTop() { window.scrollTo({ top: 0, behavior: 'smooth' }); }

const backToTopBtn = document.getElementById('backToTop');
window.addEventListener('scroll', () => {
    if (window.scrollY > 300) backToTopBtn.classList.add('show');
    else backToTopBtn.classList.remove('show');
});

window.openAllApps = function(catIndex) {
    const category = appData[catIndex];
    if (category && category.apps) category.apps.forEach(app => window.open(app.link, '_blank'));
};

const searchInput = document.getElementById('searchInput');
const emptyState = document.getElementById('emptyState');

searchInput.addEventListener('input', (e) => {
    const term = e.target.value.toLowerCase().trim();
    const sections = document.querySelectorAll('.category-section');
    let totalVisible = 0;
    
    sections.forEach(section => {
        let hasVisible = false;
        const cards = section.querySelectorAll('.app-card');
        cards.forEach(card => {
            const match = card.dataset.name.includes(term) || card.dataset.desc.includes(term);
            card.style.display = match ? 'flex' : 'none';
            if (match) hasVisible = true;
        });
        section.style.display = hasVisible ? 'block' : 'none';
        if(hasVisible) totalVisible++;
    });

    emptyState.style.display = (totalVisible === 0 && term !== '') ? 'block' : 'none';
});

document.addEventListener('keydown', (e) => {
    if (e.key === '/' && document.activeElement !== searchInput) {
        e.preventDefault();
        searchInput.focus();
    }
});

document.addEventListener('DOMContentLoaded', () => {
    renderCategoriesCustom();
});
</script>
</body>
</html>